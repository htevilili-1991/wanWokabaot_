import{c as lt,u as at,r as Oe,a as Me,j as t,L as it,b as rt,H as nt}from"./app-BjhN-tvY.js";import{H as ot}from"./heading-D3ZezZ6y.js";import{A as dt}from"./app-layout-Du68zx09.js";import{s as ct,u as mt,d as ft,i as ht,S as pt}from"./layout-VdZY0qJD.js";import{B as Q}from"./app-logo-icon-BPZD09yO.js";import{b as xt,c as jt,a as ut,d as gt,C as bt}from"./card-MHcbHjeX.js";import{c as Be,f as yt,b as Ve,D as $e,a as ze,d as Ge,e as Je}from"./dialog-C112iB9A.js";import{I as W}from"./input-D5PRjSUJ.js";import{L as o}from"./label-DZCSJwZ8.js";import{a as Ke,b as Qe,c as We,S as Xe,d as Ze}from"./select-pVnsOI3H.js";import{c as _t,a as Ye,d as ee,b as te,e as vt,f as St}from"./table-B0OYXMeZ.js";import{D as Ct}from"./delete-confirmation-popover-ZkBInUJC.js";/* empty css            */import"./index-SvVCGikQ.js";import"./index-DNSXI0Kn.js";import"./separator-IHZ3mKDY.js";import"./index-BGKuC1gv.js";import"./index-DMmff4St.js";import"./check--qi0KQcJ.js";const Dt=[{title:"User Management",href:ht().url}];function Kt(r){const e=lt.c(146),{users:i,roles:d}=r,{auth:X}=at().props,[He,Ie]=Oe.useState(!1),[Le,se]=Oe.useState(!1),[Re,le]=Oe.useState(!1),[Y,ae]=Oe.useState(null);let ie;e[0]===Symbol.for("react.memo_cache_sentinel")?(ie={name:"",email:"",password:"",role:""},e[0]=ie):ie=e[0];const a=Me(ie);let re;e[1]===Symbol.for("react.memo_cache_sentinel")?(re={name:"",email:"",password:"",role:""},e[1]=re):re=e[1];const s=Me(re);let ne;e[2]!==a?(ne=l=>{l.preventDefault(),a.post(ct(),{onFinish:()=>{a.reset(),Ie(!1)}})},e[2]=a,e[3]=ne):ne=e[3];const ke=ne;let oe;e[4]!==s?(oe=l=>{l.preventDefault(),s.put(mt(s.data.id),{onFinish:()=>{s.reset(),se(!1)}})},e[4]=s,e[5]=oe):oe=e[5];const Ae=oe;let de;e[6]===Symbol.for("react.memo_cache_sentinel")?(de=l=>{ae(l),le(!0)},e[6]=de):de=e[6];const et=de;let ce;e[7]!==Y?(ce=()=>{Y&&rt.delete(ft(Y.id).url,{onSuccess:()=>{le(!1),ae(null)},onError:()=>{le(!1),ae(null)}})},e[7]=Y,e[8]=ce):ce=e[8];const Pe=ce;let me;e[9]!==s?(me=l=>{s.setData({id:l.id,name:l.name,email:l.email,password:"",role:l.roles[0]?.name||""}),se(!0)},e[9]=s,e[10]=me):me=e[10];const Z=me;let fe,he;e[11]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(nt,{title:"User Management"}),he=t.jsx("h1",{className:"sr-only",children:"User Management"}),e[11]=fe,e[12]=he):(fe=e[11],he=e[12]);let pe;e[13]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(ot,{title:"User Management",description:"Create, edit, and manage user accounts and their roles"}),e[13]=pe):pe=e[13];let xe;e[14]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(yt,{asChild:!0,children:t.jsx(Q,{children:"Add User"})}),e[14]=xe):xe=e[14];let je;e[15]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsxs(Ve,{children:[t.jsx($e,{children:"Create New User"}),t.jsx(ze,{children:"Add a new user to the system with the appropriate role."})]}),e[15]=je):je=e[15];let ue;e[16]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(o,{htmlFor:"name",children:"Name"}),e[16]=ue):ue=e[16];let c;e[17]!==a?(c=l=>a.setData("name",l.target.value),e[17]=a,e[18]=c):c=e[18];let m;e[19]!==a.data.name||e[20]!==c?(m=t.jsxs("div",{children:[ue,t.jsx(W,{id:"name",type:"text",value:a.data.name,onChange:c,required:!0})]}),e[19]=a.data.name,e[20]=c,e[21]=m):m=e[21];let ge;e[22]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(o,{htmlFor:"email",children:"Email"}),e[22]=ge):ge=e[22];let f;e[23]!==a?(f=l=>a.setData("email",l.target.value),e[23]=a,e[24]=f):f=e[24];let h;e[25]!==a.data.email||e[26]!==f?(h=t.jsxs("div",{children:[ge,t.jsx(W,{id:"email",type:"email",value:a.data.email,onChange:f,required:!0})]}),e[25]=a.data.email,e[26]=f,e[27]=h):h=e[27];let be;e[28]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(o,{htmlFor:"password",children:"Password"}),e[28]=be):be=e[28];let p;e[29]!==a?(p=l=>a.setData("password",l.target.value),e[29]=a,e[30]=p):p=e[30];let x;e[31]!==a.data.password||e[32]!==p?(x=t.jsxs("div",{children:[be,t.jsx(W,{id:"password",type:"password",value:a.data.password,onChange:p,required:!0})]}),e[31]=a.data.password,e[32]=p,e[33]=x):x=e[33];let ye;e[34]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(o,{htmlFor:"role",children:"Role"}),e[34]=ye):ye=e[34];const tt=a.data.role;let j;e[35]!==a?(j=l=>a.setData("role",l),e[35]=a,e[36]=j):j=e[36];let _e;e[37]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(Ke,{children:t.jsx(Qe,{placeholder:"Select a role"})}),e[37]=_e):_e=e[37];let u;e[38]!==d?(u=d.map(Ut),e[38]=d,e[39]=u):u=e[39];let g;e[40]!==u?(g=t.jsx(We,{children:u}),e[40]=u,e[41]=g):g=e[41];let b;e[42]!==a.data.role||e[43]!==j||e[44]!==g?(b=t.jsxs("div",{children:[ye,t.jsxs(Xe,{value:tt,onValueChange:j,children:[_e,g]})]}),e[42]=a.data.role,e[43]=j,e[44]=g,e[45]=b):b=e[45];let y;e[46]!==m||e[47]!==h||e[48]!==x||e[49]!==b?(y=t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[m,h,x,b]}),e[46]=m,e[47]=h,e[48]=x,e[49]=b,e[50]=y):y=e[50];let _;e[51]!==a.processing?(_=t.jsx(Be,{children:t.jsx(Q,{type:"submit",disabled:a.processing,children:"Create User"})}),e[51]=a.processing,e[52]=_):_=e[52];let v;e[53]!==ke||e[54]!==y||e[55]!==_?(v=t.jsxs(Ge,{className:"sm:max-w-[425px]",children:[je,t.jsxs("form",{onSubmit:ke,className:"space-y-4",children:[y,_]})]}),e[53]=ke,e[54]=y,e[55]=_,e[56]=v):v=e[56];let S;e[57]!==He||e[58]!==v?(S=t.jsxs("div",{className:"flex items-center justify-between",children:[pe,t.jsxs(Je,{open:He,onOpenChange:Ie,children:[xe,v]})]}),e[57]=He,e[58]=v,e[59]=S):S=e[59];let ve;e[60]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsxs(Ve,{children:[t.jsx($e,{children:"Edit User"}),t.jsx(ze,{children:"Update user information and role."})]}),e[60]=ve):ve=e[60];let Se;e[61]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(o,{htmlFor:"edit-name",children:"Name"}),e[61]=Se):Se=e[61];let C;e[62]!==s?(C=l=>s.setData("name",l.target.value),e[62]=s,e[63]=C):C=e[63];let D;e[64]!==s.data.name||e[65]!==C?(D=t.jsxs("div",{children:[Se,t.jsx(W,{id:"edit-name",type:"text",value:s.data.name,onChange:C,required:!0})]}),e[64]=s.data.name,e[65]=C,e[66]=D):D=e[66];let Ce;e[67]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(o,{htmlFor:"edit-email",children:"Email"}),e[67]=Ce):Ce=e[67];let w;e[68]!==s?(w=l=>s.setData("email",l.target.value),e[68]=s,e[69]=w):w=e[69];let N;e[70]!==s.data.email||e[71]!==w?(N=t.jsxs("div",{children:[Ce,t.jsx(W,{id:"edit-email",type:"email",value:s.data.email,onChange:w,required:!0})]}),e[70]=s.data.email,e[71]=w,e[72]=N):N=e[72];let De;e[73]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx(o,{htmlFor:"edit-password",children:"New Password (leave blank to keep current)"}),e[73]=De):De=e[73];let U;e[74]!==s?(U=l=>s.setData("password",l.target.value),e[74]=s,e[75]=U):U=e[75];let F;e[76]!==s.data.password||e[77]!==U?(F=t.jsxs("div",{children:[De,t.jsx(W,{id:"edit-password",type:"password",value:s.data.password,onChange:U})]}),e[76]=s.data.password,e[77]=U,e[78]=F):F=e[78];let we;e[79]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(o,{htmlFor:"edit-role",children:"Role"}),e[79]=we):we=e[79];const st=s.data.role;let E;e[80]!==s?(E=l=>s.setData("role",l),e[80]=s,e[81]=E):E=e[81];let Ne;e[82]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(Ke,{children:t.jsx(Qe,{placeholder:"Select a role"})}),e[82]=Ne):Ne=e[82];let T;e[83]!==d?(T=d.map(Nt),e[83]=d,e[84]=T):T=e[84];let O;e[85]!==T?(O=t.jsx(We,{children:T}),e[85]=T,e[86]=O):O=e[86];let H;e[87]!==s.data.role||e[88]!==E||e[89]!==O?(H=t.jsxs("div",{children:[we,t.jsxs(Xe,{value:st,onValueChange:E,children:[Ne,O]})]}),e[87]=s.data.role,e[88]=E,e[89]=O,e[90]=H):H=e[90];let L;e[91]!==D||e[92]!==N||e[93]!==F||e[94]!==H?(L=t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[D,N,F,H]}),e[91]=D,e[92]=N,e[93]=F,e[94]=H,e[95]=L):L=e[95];let R;e[96]!==s?(R=t.jsx(Q,{type:"button",variant:"outline",onClick:()=>{s.reset(),se(!1)},children:"Cancel"}),e[96]=s,e[97]=R):R=e[97];let k;e[98]!==s.processing?(k=t.jsx(Q,{type:"submit",disabled:s.processing,children:"Update User"}),e[98]=s.processing,e[99]=k):k=e[99];let A;e[100]!==R||e[101]!==k?(A=t.jsxs(Be,{children:[R,k]}),e[100]=R,e[101]=k,e[102]=A):A=e[102];let P;e[103]!==Ae||e[104]!==L||e[105]!==A?(P=t.jsxs(Ge,{className:"sm:max-w-[425px]",children:[ve,t.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[L,A]})]}),e[103]=Ae,e[104]=L,e[105]=A,e[106]=P):P=e[106];let q;e[107]!==Le||e[108]!==P?(q=t.jsx(Je,{open:Le,onOpenChange:se,children:P}),e[107]=Le,e[108]=P,e[109]=q):q=e[109];let I;e[110]!==i.total?(I=t.jsxs(xt,{children:["Users (",i.total,")"]}),e[110]=i.total,e[111]=I):I=e[111];let Ue;e[112]===Symbol.for("react.memo_cache_sentinel")?(Ue=t.jsx(jt,{children:"Manage existing user accounts."}),e[112]=Ue):Ue=e[112];let M;e[113]!==I?(M=t.jsxs(ut,{children:[I,Ue]}),e[113]=I,e[114]=M):M=e[114];let Fe;e[115]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx(_t,{children:t.jsxs(Ye,{children:[t.jsx(ee,{children:"Name"}),t.jsx(ee,{children:"Email"}),t.jsx(ee,{children:"Role"}),t.jsx(ee,{children:"Created"}),t.jsx(ee,{children:"Actions"})]})}),e[115]=Fe):Fe=e[115];let B;if(e[116]!==X||e[117]!==Z||e[118]!==i.data){let l;e[120]!==X||e[121]!==Z?(l=n=>t.jsxs(Ye,{children:[t.jsx(te,{children:n.name}),t.jsx(te,{children:n.email}),t.jsx(te,{children:n.roles.length>0?n.roles[0].name:"No Role"}),t.jsx(te,{children:new Date(n.created_at).toLocaleDateString()}),t.jsx(te,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Q,{size:"sm",variant:"outline",onClick:()=>Z(n),children:"Edit"}),n.id!==X.user.id&&t.jsx(Q,{size:"sm",variant:"destructive",onClick:()=>et(n),children:"Delete"})]})})]},n.id),e[120]=X,e[121]=Z,e[122]=l):l=e[122],B=i.data.map(l),e[116]=X,e[117]=Z,e[118]=i.data,e[119]=B}else B=e[119];let V;e[123]!==B?(V=t.jsxs(vt,{children:[Fe,t.jsx(St,{children:B})]}),e[123]=B,e[124]=V):V=e[124];let $;e[125]!==i.current_page||e[126]!==i.last_page?($=i.last_page>1&&t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("div",{className:"flex gap-2",children:Array.from({length:i.last_page},wt).map(l=>t.jsx(it,{href:`/settings/users?page=${l}`,className:`px-3 py-2 rounded ${l===i.current_page?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:l},l))})}),e[125]=i.current_page,e[126]=i.last_page,e[127]=$):$=e[127];let z;e[128]!==V||e[129]!==$?(z=t.jsxs(gt,{children:[V,$]}),e[128]=V,e[129]=$,e[130]=z):z=e[130];let G;e[131]!==M||e[132]!==z?(G=t.jsxs(bt,{children:[M,z]}),e[131]=M,e[132]=z,e[133]=G):G=e[133];let J;e[134]!==S||e[135]!==q||e[136]!==G?(J=t.jsxs("div",{className:"space-y-6",children:[S,q,G]}),e[134]=S,e[135]=q,e[136]=G,e[137]=J):J=e[137];let Ee;e[138]===Symbol.for("react.memo_cache_sentinel")?(Ee=()=>{le(!1),ae(null)},e[138]=Ee):Ee=e[138];const qe=Y?.name||"";let K;e[139]!==Pe||e[140]!==Re||e[141]!==qe?(K=t.jsx(Ct,{isOpen:Re,onClose:Ee,onConfirm:Pe,itemName:qe}),e[139]=Pe,e[140]=Re,e[141]=qe,e[142]=K):K=e[142];let Te;return e[143]!==J||e[144]!==K?(Te=t.jsxs(dt,{breadcrumbs:Dt,children:[fe,he,t.jsxs(pt,{children:[J,K]})]}),e[143]=J,e[144]=K,e[145]=Te):Te=e[145],Te}function wt(r,e){return e+1}function Nt(r){return t.jsx(Ze,{value:r.name,children:r.name},r.id)}function Ut(r){return t.jsx(Ze,{value:r.name,children:r.name},r.id)}export{Kt as default};
