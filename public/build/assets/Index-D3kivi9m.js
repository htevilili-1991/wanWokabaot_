import{c as Q,R as q,j as t,L as J,r as O,H as W}from"./app-C_R9jF1x.js";import{c as X,B as I}from"./app-logo-icon-BwBSu0IG.js";import{C as M,a as P,b as Y,c as Z}from"./card-DTVjJi2-.js";import{I as ee}from"./input-D-5Nmu-v.js";import{S as K,a as te,b as se,c as ae,d as le}from"./select-DdUXmIzL.js";import{B as R}from"./badge-BZIuKSZg.js";import{C as re,A as ie}from"./app-layout-DKoOPHdo.js";import{C as V}from"./circle-check-big-Dz9gCZqL.js";import{U as ce}from"./user-BmdIBeKC.js";import{C as ne}from"./calendar-9qcUSZdr.js";import{A as me}from"./arrow-left-BmNkB6xd.js";import{S as G}from"./search-BXiL5jgi.js";/* empty css            */import"./index-Bkt3dTVR.js";import"./index-BaYRpaJE.js";import"./check-vl6QDcNS.js";import"./index-lGcX66cW.js";const oe=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],de=X("Filter",oe),Te=a=>{const e=Q.c(43),{completedSales:l,members:A,filters:$}=a,[i,z]=q.useState($.search||""),[r,E]=q.useState($.member_id||"all"),B=xe;let u;e[0]!==r||e[1]!==i?(u=s=>{s.preventDefault(),O.get("/completed-transactions",{search:i,member_id:r==="all"?"":r})},e[0]=r,e[1]=i,e[2]=u):u=e[2];const T=u;let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{z(""),E("all"),O.get("/completed-transactions")},e[3]=g):g=e[3];const U=g,D=he;let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(W,{title:"Completed Transactions"}),e[4]=b):b=e[4];let N;e[5]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(J,{href:"/pos",children:t.jsxs(I,{variant:"outline",size:"sm",children:[t.jsx(me,{className:"h-4 w-4 mr-2"}),"Back to POS"]})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Completed Transactions"}),t.jsx("p",{className:"text-gray-600",children:"View and manage completed sales transactions"})]})]}),e[5]=N):N=e[5];let v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(V,{className:"h-3 w-3"}),e[6]=v):v=e[6];let c;e[7]!==l.data.length?(c=t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[N,t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(R,{variant:"default",className:"flex items-center gap-1",children:[v,l.data.length," Completed"]})})]}),e[7]=l.data.length,e[8]=c):c=e[8];let _;e[9]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(Y,{children:t.jsxs(Z,{className:"flex items-center gap-2",children:[t.jsx(de,{className:"h-5 w-5"}),"Filters"]})}),e[9]=_):_=e[9];let C;e[10]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e[10]=C):C=e[10];let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=s=>z(s.target.value),e[11]=S):S=e[11];let n;e[12]!==i?(n=t.jsxs("div",{className:"relative",children:[C,t.jsx(ee,{placeholder:"Search transaction ID or member name...",value:i,onChange:S,className:"pl-10"})]}),e[12]=i,e[13]=n):n=e[13];let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(te,{children:t.jsx(se,{placeholder:"Filter by member"})}),e[14]=w):w=e[14];let F;e[15]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(K,{value:"all",children:"All Members"}),e[15]=F):F=e[15];let m;e[16]!==A?(m=A.map(pe),e[16]=A,e[17]=m):m=e[17];let o;e[18]!==m?(o=t.jsxs(ae,{children:[F,m]}),e[18]=m,e[19]=o):o=e[19];let d;e[20]!==r||e[21]!==o?(d=t.jsxs(le,{value:r,onValueChange:E,children:[w,o]}),e[20]=r,e[21]=o,e[22]=d):d=e[22];let L;e[23]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(I,{type:"submit",children:[t.jsx(G,{className:"h-4 w-4 mr-2"}),"Search"]}),t.jsx(I,{type:"button",variant:"outline",onClick:U,children:"Clear"})]}),e[23]=L):L=e[23];let x;e[24]!==n||e[25]!==d?(x=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n,d,L]}),e[24]=n,e[25]=d,e[26]=x):x=e[26];let h;e[27]!==T||e[28]!==x?(h=t.jsxs(M,{className:"mb-6",children:[_,t.jsx(P,{children:t.jsx("form",{onSubmit:T,className:"space-y-4",children:x})})]}),e[27]=T,e[28]=x,e[29]=h):h=e[29];let p;e[30]!==l.data||e[31]!==r||e[32]!==i?(p=l.data.length===0?t.jsx(M,{children:t.jsxs(P,{className:"text-center py-12",children:[t.jsx(V,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No completed transactions"}),t.jsx("p",{className:"text-gray-600 mb-4",children:i||r?"No transactions match your search criteria.":"No transactions have been completed yet."}),(i||r)&&t.jsx(I,{variant:"outline",onClick:U,children:"Clear Filters"})]})}):l.data.map(s=>t.jsx(M,{className:"hover:shadow-md transition-shadow",children:t.jsxs(P,{className:"p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"font-semibold text-lg",children:s.transaction_id}),t.jsxs(R,{variant:"default",className:"flex items-center gap-1",children:[t.jsx(V,{className:"h-3 w-3"}),"Completed"]}),D(s.payment_method)&&t.jsx(R,{variant:D(s.payment_method).variant,children:D(s.payment_method).label})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ce,{className:"h-4 w-4"}),s.member_name]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ne,{className:"h-4 w-4"}),"Created: ",new Date(s.created_at).toLocaleDateString()]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(re,{className:"h-4 w-4"}),"Completed: ",new Date(s.completed_at).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:B(s.subtotal)}),t.jsxs("div",{className:"text-sm text-gray-600",children:[s.items_count," items"]})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"font-medium mb-2",children:["Items (",s.items_count,")"]}),t.jsxs("div",{className:"space-y-1",children:[s.items.slice(0,3).map((y,H)=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{children:[y.name," x ",y.quantity]}),t.jsx("span",{children:B(Number(y.total))})]},H)),s.items.length>3&&t.jsxs("div",{className:"text-sm text-gray-500",children:["+",s.items.length-3," more items"]})]})]}),s.payment_history&&s.payment_history.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Payment History"}),t.jsx("div",{className:"space-y-1",children:s.payment_history.map((y,H)=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"capitalize",children:y.payment_method}),t.jsx("span",{children:B(y.amount)})]},H))})]}),t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["Created by ",s.created_by,s.completed_by&&` â€¢ Completed by ${s.completed_by}`]}),s.notes&&t.jsxs("div",{className:"text-sm text-gray-600",children:["Notes: ",s.notes]})]})]})},s.id)),e[30]=l.data,e[31]=r,e[32]=i,e[33]=p):p=e[33];let f;e[34]!==p?(f=t.jsx("div",{className:"space-y-4",children:p}),e[34]=p,e[35]=f):f=e[35];let j;e[36]!==l.links?(j=l.links.length>3&&t.jsx("div",{className:"flex justify-center mt-6",children:t.jsx("div",{className:"flex gap-1",children:l.links.map(fe)})}),e[36]=l.links,e[37]=j):j=e[37];let k;return e[38]!==h||e[39]!==f||e[40]!==j||e[41]!==c?(k=t.jsxs(ie,{children:[b,t.jsxs("div",{className:"container mx-auto px-4 py-6",children:[c,h,f,j]})]}),e[38]=h,e[39]=f,e[40]=j,e[41]=c,e[42]=k):k=e[42],k};function xe(a){return`${(typeof a=="string"?parseFloat(a):a).toFixed(2)} VT`}function he(a){return{cash:{variant:"default",label:"Cash"},pay_later:{variant:"secondary",label:"Pay Later"},multiple:{variant:"outline",label:"Multiple"}}[a]||{variant:"secondary",label:a}}function pe(a){return t.jsx(K,{value:a.id.toString(),children:a.name},a.id)}function fe(a,e){return t.jsx(J,{href:a.url||"#",className:`px-3 py-2 rounded-md text-sm ${a.active?"bg-blue-500 text-white":a.url?"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:a.label}},e)}export{Te as default};
