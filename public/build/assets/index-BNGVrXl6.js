import{u as re,r as d,a as F,b as C,j as e,H as ae,L as ie}from"./app-DkZ-DWhw.js";import{H as ne}from"./heading-cxkzRspZ.js";import{i as f,A as ce,b as oe,u as le,d as de}from"./app-layout-DqFw64O5.js";import{B as h}from"./app-logo-icon-Bcxu4ubl.js";import{C as T,d as I,a as me,b as ue,c as xe}from"./card-DhDP5xCu.js";import{e as q,f as E,d as O,b as $,D as A,a as H,c as V}from"./dialog-Cwy9jTqX.js";import{I as c}from"./input-o1SBJHVm.js";import{L as a}from"./label-C5RrW0iC.js";import{S as he,a as ge,b as pe,c as je,d as N,C as j,e as v}from"./select-DREH3ghL.js";import{e as ve,c as fe,a as L,d as u,f as be,b as x}from"./table-YfIy4o01.js";import{D as ye}from"./delete-confirmation-popover-Dazl7_N9.js";import{S as _e}from"./search-CVq_ekZj.js";/* empty css            */import"./index-k_kPhzW4.js";import"./index-CoeNSFUt.js";import"./index-BDqSilVs.js";import"./index-DC6JmAiA.js";import"./check-BlhVxzHt.js";const ke=[{title:"Inventory",href:f().url}];function ze({products:m,filters:b}){const{flash:Ce}=re().props,[y,B]=d.useState(b.search||""),[o,M]=d.useState(b.sort_by||"created_at"),[l,U]=d.useState(b.sort_direction||"desc"),[g,z]=d.useState(b.per_page||10),[R,w]=d.useState(!1),[Ne,S]=d.useState(!1),[G,_]=d.useState(!1),[D,k]=d.useState(null),r=F({name:"",category:"",cost_price:"",selling_price:"",current_stock:"",minimum_stock:"",description:""}),t=F({id:"",name:"",category:"",cost_price:"",selling_price:"",current_stock:"",minimum_stock:"",description:""}),J=d.useMemo(()=>{let s;return i=>{clearTimeout(s),s=setTimeout(()=>{C.get(f().url,{search:i,sort_by:o,sort_direction:l,per_page:g},{preserveState:!0,replace:!0})},300)}},[o,l,g]),K=s=>{B(s),J(s)},p=s=>{const i=o===s&&l==="asc"?"desc":"asc";M(s),U(i),C.get(f().url,{search:y,sort_by:s,sort_direction:i,per_page:g},{preserveState:!0,replace:!0})},Q=s=>{const i=parseInt(s);z(i),C.get(f().url,{search:y,sort_by:o,sort_direction:l,per_page:i},{preserveState:!0,replace:!0})},W=s=>{s.preventDefault(),r.post(oe(),{onFinish:()=>{r.reset(),w(!1)}})},X=s=>{s.preventDefault(),t.put(le(t.data.id),{onFinish:()=>{t.reset(),S(!1)}})},Y=s=>{k(s),_(!0)},Z=()=>{D&&C.delete(de(D.id).url,{onSuccess:()=>{_(!1),k(null)},onError:()=>{_(!1),k(null)}})},ee=s=>{t.setData({id:s.id,name:s.name,category:s.category,cost_price:s.cost_price.toString(),selling_price:s.selling_price.toString(),current_stock:s.current_stock.toString(),minimum_stock:s.minimum_stock.toString(),description:s.description||""}),S(!0)},P=s=>`${(typeof s=="string"?parseFloat(s):s).toFixed(2)} VT`,se=s=>s.current_stock<=0?{status:"Out of Stock",color:"text-red-600 bg-red-50"}:s.current_stock<=s.minimum_stock?{status:"Low Stock",color:"text-orange-600 bg-orange-50"}:{status:"In Stock",color:"text-green-600 bg-green-50"},te=s=>s.current_stock<=0?"text-red-600 font-semibold":s.current_stock<=s.minimum_stock?"text-orange-600 font-semibold":"text-gray-900";return e.jsxs(ce,{breadcrumbs:ke,children:[e.jsx(ae,{title:"Inventory"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ne,{title:"Inventory Management",description:"Manage products, pricing, and stock levels"}),e.jsxs(q,{open:R,onOpenChange:w,children:[e.jsx(E,{asChild:!0,children:e.jsx(h,{children:"Add Product"})}),e.jsxs(O,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsx(A,{children:"Add New Product"}),e.jsx(H,{children:"Create a new product with pricing and stock information."})]}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(a,{htmlFor:"name",children:"Product Name *"}),e.jsx(c,{id:"name",type:"text",value:r.data.name,onChange:s=>r.setData("name",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"category",children:"Category *"}),e.jsx(c,{id:"category",type:"text",value:r.data.category,onChange:s=>r.setData("category",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"cost_price",children:"Cost Price (VT) *"}),e.jsx(c,{id:"cost_price",type:"number",step:"0.01",min:"0",value:r.data.cost_price,onChange:s=>r.setData("cost_price",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"selling_price",children:"Selling Price (VT) *"}),e.jsx(c,{id:"selling_price",type:"number",step:"0.01",min:"0",value:r.data.selling_price,onChange:s=>r.setData("selling_price",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"current_stock",children:"Current Stock *"}),e.jsx(c,{id:"current_stock",type:"number",min:"0",value:r.data.current_stock,onChange:s=>r.setData("current_stock",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"minimum_stock",children:"Minimum Stock *"}),e.jsx(c,{id:"minimum_stock",type:"number",min:"0",value:r.data.minimum_stock,onChange:s=>r.setData("minimum_stock",s.target.value),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:r.data.description,onChange:s=>r.setData("description",s.target.value),className:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",rows:3})]})]}),e.jsx(V,{children:e.jsx(h,{type:"submit",disabled:r.processing,children:"Create Product"})})]})]})]})]}),e.jsx(T,{children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(c,{placeholder:"Search products...",value:y,onChange:s=>K(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{htmlFor:"per-page",children:"Show:"}),e.jsxs(he,{value:g.toString(),onValueChange:Q,children:[e.jsx(ge,{className:"w-20",children:e.jsx(pe,{})}),e.jsxs(je,{children:[e.jsx(N,{value:"10",children:"10"}),e.jsx(N,{value:"20",children:"20"}),e.jsx(N,{value:"50",children:"50"}),e.jsx(N,{value:"100",children:"100"})]})]})]})]})})}),e.jsxs(T,{children:[e.jsxs(me,{children:[e.jsxs(ue,{children:["Products (",m.total,")"]}),e.jsxs(xe,{children:[m.from,"-",m.to," of ",m.total," products"]})]}),e.jsxs(I,{children:[e.jsxs(ve,{children:[e.jsx(fe,{children:e.jsxs(L,{children:[e.jsx(u,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>p("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Product Name",o==="name"&&(l==="asc"?e.jsx(j,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"}))]})}),e.jsx(u,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>p("category"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Category",o==="category"&&(l==="asc"?e.jsx(j,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"}))]})}),e.jsx(u,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>p("cost_price"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Cost Price",o==="cost_price"&&(l==="asc"?e.jsx(j,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"}))]})}),e.jsx(u,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>p("selling_price"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Selling Price",o==="selling_price"&&(l==="asc"?e.jsx(j,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"}))]})}),e.jsx(u,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>p("current_stock"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Stock",o==="current_stock"&&(l==="asc"?e.jsx(j,{className:"h-4 w-4"}):e.jsx(v,{className:"h-4 w-4"}))]})}),e.jsx(u,{children:"Status"}),e.jsx(u,{children:"Actions"})]})}),e.jsx(be,{children:m.data.map(s=>{const i=se(s);return e.jsxs(L,{children:[e.jsx(x,{className:"font-medium",children:s.name}),e.jsx(x,{children:s.category}),e.jsx(x,{children:P(s.cost_price)}),e.jsx(x,{children:P(s.selling_price)}),e.jsxs(x,{className:te(s),children:[s.current_stock," / ",s.minimum_stock]}),e.jsx(x,{children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.color}`,children:i.status})}),e.jsx(x,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(q,{children:[e.jsx(E,{asChild:!0,children:e.jsx(h,{size:"sm",variant:"outline",onClick:()=>ee(s),children:"Edit"})}),e.jsxs(O,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsx(A,{children:"Edit Product"}),e.jsx(H,{children:"Update product information, pricing, and stock levels."})]}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(a,{htmlFor:"edit-name",children:"Product Name *"}),e.jsx(c,{id:"edit-name",type:"text",value:t.data.name,onChange:n=>t.setData("name",n.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-category",children:"Category *"}),e.jsx(c,{id:"edit-category",type:"text",value:t.data.category,onChange:n=>t.setData("category",n.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-cost_price",children:"Cost Price (VT) *"}),e.jsx(c,{id:"edit-cost_price",type:"number",step:"0.01",min:"0",value:t.data.cost_price,onChange:n=>t.setData("cost_price",n.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-selling_price",children:"Selling Price (VT) *"}),e.jsx(c,{id:"edit-selling_price",type:"number",step:"0.01",min:"0",value:t.data.selling_price,onChange:n=>t.setData("selling_price",n.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-current_stock",children:"Current Stock *"}),e.jsx(c,{id:"edit-current_stock",type:"number",min:"0",value:t.data.current_stock,onChange:n=>t.setData("current_stock",n.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-minimum_stock",children:"Minimum Stock *"}),e.jsx(c,{id:"edit-minimum_stock",type:"number",min:"0",value:t.data.minimum_stock,onChange:n=>t.setData("minimum_stock",n.target.value),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(a,{htmlFor:"edit-description",children:"Description"}),e.jsx("textarea",{id:"edit-description",value:t.data.description,onChange:n=>t.setData("description",n.target.value),className:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",rows:3})]})]}),e.jsxs(V,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>{t.reset(),S(!1)},children:"Cancel"}),e.jsx(h,{type:"submit",disabled:t.processing,children:"Update Product"})]})]})]})]}),e.jsx(h,{size:"sm",variant:"destructive",onClick:()=>Y(s),children:"Delete"})]})})]},s.id)})})]}),m.last_page>1&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:m.last_page},(s,i)=>i+1).map(s=>e.jsx(ie,{href:`${f().url}?page=${s}&search=${y}&sort_by=${o}&sort_direction=${l}&per_page=${g}`,className:`px-3 py-2 rounded ${s===m.current_page?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:s},s))})})]})]})]}),e.jsx(ye,{isOpen:G,onClose:()=>{_(!1),k(null)},onConfirm:Z,itemName:D?.name||""})]})}export{ze as default};
