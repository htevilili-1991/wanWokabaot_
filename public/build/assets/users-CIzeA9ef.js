import{c as yt,u as bt,a as Je,b as ot,j as t,L as vt,r as St,H as Dt}from"./app-C_R9jF1x.js";import{H as _t}from"./heading-E6zyScli.js";import{A as Ct}from"./app-layout-DKoOPHdo.js";import{f as Nt,g as wt,h as Ft,j as Ut,S as Lt}from"./layout-CU7-PMm-.js";import{B as ie}from"./app-logo-icon-BwBSu0IG.js";import{c as Et,d as Tt,b as kt,a as Ot,C as Ht}from"./card-DTVjJi2-.js";import{d as ct,f as Pt,b as dt,c as mt,e as ht,a as ft,D as pt}from"./dialog-C4npLh4v.js";import{I as re}from"./input-D-5Nmu-v.js";import{L as n}from"./label-CIPFvbyM.js";import{d as Ke,a as Qe,b as We,c as Xe,S as Ye}from"./select-DdUXmIzL.js";import{c as It,T as xt,b as ne,a as oe,e as Rt,d as $t}from"./table-Bosz4qyP.js";import{D as At}from"./delete-confirmation-popover-BxYihECp.js";/* empty css            */import"./index-Bkt3dTVR.js";import"./index-lGcX66cW.js";import"./separator-B07_mmHQ.js";import"./index-DghwwTgB.js";import"./index-BaYRpaJE.js";import"./check-vl6QDcNS.js";import"./triangle-alert-fY-VY7ce.js";const qt=[{title:"User Management",href:Ut().url}];function xs(r){const e=yt.c(178),{users:o,roles:m,locations:c}=r,{auth:ce}=bt().props,[Ze,nt]=Je.useState(!1),[et,fe]=Je.useState(!1),[tt,pe]=Je.useState(!1),[de,xe]=Je.useState(null);let je;e[0]===Symbol.for("react.memo_cache_sentinel")?(je=[],e[0]=je):je=e[0];let ue;e[1]===Symbol.for("react.memo_cache_sentinel")?(ue={name:"",email:"",password:"",role:"",locations:je,primary_location:null},e[1]=ue):ue=e[1];const l=ot(ue);let ge;e[2]===Symbol.for("react.memo_cache_sentinel")?(ge=[],e[2]=ge):ge=e[2];let ye;e[3]===Symbol.for("react.memo_cache_sentinel")?(ye={name:"",email:"",password:"",role:"",locations:ge,primary_location:null},e[3]=ye):ye=e[3];const a=ot(ye);let be;e[4]!==l?(be=s=>{s.preventDefault(),l.post(Nt(),{onFinish:()=>{l.reset(),nt(!1)}})},e[4]=l,e[5]=be):be=e[5];const st=be;let ve;e[6]!==a?(ve=s=>{s.preventDefault(),a.put(wt(a.data.id),{onFinish:()=>{a.reset(),fe(!1)}})},e[6]=a,e[7]=ve):ve=e[7];const at=ve;let Se;e[8]===Symbol.for("react.memo_cache_sentinel")?(Se=s=>{xe(s),pe(!0)},e[8]=Se):Se=e[8];const jt=Se;let De;e[9]!==de?(De=()=>{de&&St.delete(Ft(de.id).url,{onSuccess:()=>{pe(!1),xe(null)},onError:()=>{pe(!1),xe(null)}})},e[9]=de,e[10]=De):De=e[10];const lt=De;let _e;e[11]!==a?(_e=s=>{a.setData({id:s.id,name:s.name,email:s.email,password:"",role:s.roles[0]?.name||"",locations:s.locations.map(Kt),primary_location:null}),fe(!0)},e[11]=a,e[12]=_e):_e=e[12];const me=_e;let Ce,Ne;e[13]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(Dt,{title:"User Management"}),Ne=t.jsx("h1",{className:"sr-only",children:"User Management"}),e[13]=Ce,e[14]=Ne):(Ce=e[13],Ne=e[14]);let we;e[15]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(_t,{title:"User Management",description:"Create, edit, and manage user accounts and their roles"}),e[15]=we):we=e[15];let Fe;e[16]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx(Pt,{asChild:!0,children:t.jsx(ie,{children:"Add User"})}),e[16]=Fe):Fe=e[16];let Ue;e[17]===Symbol.for("react.memo_cache_sentinel")?(Ue=t.jsxs(dt,{children:[t.jsx(mt,{children:"Create New User"}),t.jsx(ht,{children:"Add a new user to the system with the appropriate role."})]}),e[17]=Ue):Ue=e[17];let Le;e[18]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsx(n,{htmlFor:"name",children:"Name"}),e[18]=Le):Le=e[18];let h;e[19]!==l?(h=s=>l.setData("name",s.target.value),e[19]=l,e[20]=h):h=e[20];let f;e[21]!==l.data.name||e[22]!==h?(f=t.jsxs("div",{children:[Le,t.jsx(re,{id:"name",type:"text",value:l.data.name,onChange:h,required:!0})]}),e[21]=l.data.name,e[22]=h,e[23]=f):f=e[23];let Ee;e[24]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(n,{htmlFor:"email",children:"Email"}),e[24]=Ee):Ee=e[24];let p;e[25]!==l?(p=s=>l.setData("email",s.target.value),e[25]=l,e[26]=p):p=e[26];let x;e[27]!==l.data.email||e[28]!==p?(x=t.jsxs("div",{children:[Ee,t.jsx(re,{id:"email",type:"email",value:l.data.email,onChange:p,required:!0})]}),e[27]=l.data.email,e[28]=p,e[29]=x):x=e[29];let Te;e[30]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx(n,{htmlFor:"password",children:"Password"}),e[30]=Te):Te=e[30];let j;e[31]!==l?(j=s=>l.setData("password",s.target.value),e[31]=l,e[32]=j):j=e[32];let u;e[33]!==l.data.password||e[34]!==j?(u=t.jsxs("div",{children:[Te,t.jsx(re,{id:"password",type:"password",value:l.data.password,onChange:j,required:!0})]}),e[33]=l.data.password,e[34]=j,e[35]=u):u=e[35];let ke;e[36]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx(n,{htmlFor:"role",children:"Role"}),e[36]=ke):ke=e[36];const ut=l.data.role;let g;e[37]!==l?(g=s=>l.setData("role",s),e[37]=l,e[38]=g):g=e[38];let Oe;e[39]===Symbol.for("react.memo_cache_sentinel")?(Oe=t.jsx(Qe,{children:t.jsx(We,{placeholder:"Select a role"})}),e[39]=Oe):Oe=e[39];let y;e[40]!==m?(y=m.map(Jt),e[40]=m,e[41]=y):y=e[41];let b;e[42]!==y?(b=t.jsx(Xe,{children:y}),e[42]=y,e[43]=b):b=e[43];let v;e[44]!==l.data.role||e[45]!==g||e[46]!==b?(v=t.jsxs("div",{children:[ke,t.jsxs(Ke,{value:ut,onValueChange:g,children:[Oe,b]})]}),e[44]=l.data.role,e[45]=g,e[46]=b,e[47]=v):v=e[47];let He;e[48]===Symbol.for("react.memo_cache_sentinel")?(He=t.jsx(n,{children:"Locations"}),e[48]=He):He=e[48];let S;if(e[49]!==l||e[50]!==c){let s;e[52]!==l?(s=i=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:`create-location-${i.id}`,checked:l.data.locations.includes(i.id),onChange:rt=>{const d=[...l.data.locations];if(rt.target.checked)d.push(i.id);else{const he=d.indexOf(i.id);he>-1&&d.splice(he,1),l.data.primary_location===i.id&&l.setData("primary_location",null)}l.setData("locations",d)},className:"rounded border-gray-300"}),t.jsxs(n,{htmlFor:`create-location-${i.id}`,className:"text-sm",children:[i.name,i.address&&t.jsxs("span",{className:"text-gray-500 ml-1",children:["(",i.address,")"]})]})]},i.id),e[52]=l,e[53]=s):s=e[53],S=c.map(s),e[49]=l,e[50]=c,e[51]=S}else S=e[51];let D;e[54]!==S?(D=t.jsx("div",{className:"space-y-2 mt-2",children:S}),e[54]=S,e[55]=D):D=e[55];let _;e[56]!==l||e[57]!==c?(_=l.data.locations.length>1&&t.jsxs("div",{className:"mt-3",children:[t.jsx(n,{htmlFor:"create-primary-location",children:"Primary Location"}),t.jsxs(Ke,{value:l.data.primary_location?.toString()||"",onValueChange:s=>l.setData("primary_location",s?parseInt(s):null),children:[t.jsx(Qe,{className:"mt-1",children:t.jsx(We,{placeholder:"Select primary location"})}),t.jsx(Xe,{children:c.filter(s=>l.data.locations.includes(s.id)).map(Gt)})]})]}),e[56]=l,e[57]=c,e[58]=_):_=e[58];let C;e[59]!==D||e[60]!==_?(C=t.jsxs("div",{children:[He,D,_]}),e[59]=D,e[60]=_,e[61]=C):C=e[61];let N;e[62]!==f||e[63]!==x||e[64]!==u||e[65]!==v||e[66]!==C?(N=t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f,x,u,v,C]}),e[62]=f,e[63]=x,e[64]=u,e[65]=v,e[66]=C,e[67]=N):N=e[67];let w;e[68]!==l.processing?(w=t.jsx(ct,{children:t.jsx(ie,{type:"submit",disabled:l.processing,children:"Create User"})}),e[68]=l.processing,e[69]=w):w=e[69];let F;e[70]!==st||e[71]!==N||e[72]!==w?(F=t.jsxs(ft,{className:"sm:max-w-[425px]",children:[Ue,t.jsxs("form",{onSubmit:st,className:"space-y-4",children:[N,w]})]}),e[70]=st,e[71]=N,e[72]=w,e[73]=F):F=e[73];let U;e[74]!==Ze||e[75]!==F?(U=t.jsxs("div",{className:"flex items-center justify-between",children:[we,t.jsxs(pt,{open:Ze,onOpenChange:nt,children:[Fe,F]})]}),e[74]=Ze,e[75]=F,e[76]=U):U=e[76];let Pe;e[77]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsxs(dt,{children:[t.jsx(mt,{children:"Edit User"}),t.jsx(ht,{children:"Update user information and role."})]}),e[77]=Pe):Pe=e[77];let Ie;e[78]===Symbol.for("react.memo_cache_sentinel")?(Ie=t.jsx(n,{htmlFor:"edit-name",children:"Name"}),e[78]=Ie):Ie=e[78];let L;e[79]!==a?(L=s=>a.setData("name",s.target.value),e[79]=a,e[80]=L):L=e[80];let E;e[81]!==a.data.name||e[82]!==L?(E=t.jsxs("div",{children:[Ie,t.jsx(re,{id:"edit-name",type:"text",value:a.data.name,onChange:L,required:!0})]}),e[81]=a.data.name,e[82]=L,e[83]=E):E=e[83];let Re;e[84]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx(n,{htmlFor:"edit-email",children:"Email"}),e[84]=Re):Re=e[84];let T;e[85]!==a?(T=s=>a.setData("email",s.target.value),e[85]=a,e[86]=T):T=e[86];let k;e[87]!==a.data.email||e[88]!==T?(k=t.jsxs("div",{children:[Re,t.jsx(re,{id:"edit-email",type:"email",value:a.data.email,onChange:T,required:!0})]}),e[87]=a.data.email,e[88]=T,e[89]=k):k=e[89];let $e;e[90]===Symbol.for("react.memo_cache_sentinel")?($e=t.jsx(n,{htmlFor:"edit-password",children:"New Password (leave blank to keep current)"}),e[90]=$e):$e=e[90];let O;e[91]!==a?(O=s=>a.setData("password",s.target.value),e[91]=a,e[92]=O):O=e[92];let H;e[93]!==a.data.password||e[94]!==O?(H=t.jsxs("div",{children:[$e,t.jsx(re,{id:"edit-password",type:"password",value:a.data.password,onChange:O})]}),e[93]=a.data.password,e[94]=O,e[95]=H):H=e[95];let Ae;e[96]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx(n,{htmlFor:"edit-role",children:"Role"}),e[96]=Ae):Ae=e[96];const gt=a.data.role;let P;e[97]!==a?(P=s=>a.setData("role",s),e[97]=a,e[98]=P):P=e[98];let qe;e[99]===Symbol.for("react.memo_cache_sentinel")?(qe=t.jsx(Qe,{children:t.jsx(We,{placeholder:"Select a role"})}),e[99]=qe):qe=e[99];let I;e[100]!==m?(I=m.map(zt),e[100]=m,e[101]=I):I=e[101];let R;e[102]!==I?(R=t.jsx(Xe,{children:I}),e[102]=I,e[103]=R):R=e[103];let $;e[104]!==a.data.role||e[105]!==P||e[106]!==R?($=t.jsxs("div",{children:[Ae,t.jsxs(Ke,{value:gt,onValueChange:P,children:[qe,R]})]}),e[104]=a.data.role,e[105]=P,e[106]=R,e[107]=$):$=e[107];let Me;e[108]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(n,{children:"Locations"}),e[108]=Me):Me=e[108];let A;if(e[109]!==a||e[110]!==c){let s;e[112]!==a?(s=i=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:`edit-location-${i.id}`,checked:a.data.locations.includes(i.id),onChange:rt=>{const d=[...a.data.locations];if(rt.target.checked)d.push(i.id);else{const he=d.indexOf(i.id);he>-1&&d.splice(he,1),a.data.primary_location===i.id&&a.setData("primary_location",null)}a.setData("locations",d)},className:"rounded border-gray-300"}),t.jsxs(n,{htmlFor:`edit-location-${i.id}`,className:"text-sm",children:[i.name,i.address&&t.jsxs("span",{className:"text-gray-500 ml-1",children:["(",i.address,")"]})]})]},i.id),e[112]=a,e[113]=s):s=e[113],A=c.map(s),e[109]=a,e[110]=c,e[111]=A}else A=e[111];let q;e[114]!==A?(q=t.jsx("div",{className:"space-y-2 mt-2",children:A}),e[114]=A,e[115]=q):q=e[115];let M;e[116]!==a||e[117]!==c?(M=a.data.locations.length>1&&t.jsxs("div",{className:"mt-3",children:[t.jsx(n,{htmlFor:"edit-primary-location",children:"Primary Location"}),t.jsxs(Ke,{value:a.data.primary_location?.toString()||"",onValueChange:s=>a.setData("primary_location",s?parseInt(s):null),children:[t.jsx(Qe,{className:"mt-1",children:t.jsx(We,{placeholder:"Select primary location"})}),t.jsx(Xe,{children:c.filter(s=>a.data.locations.includes(s.id)).map(Bt)})]})]}),e[116]=a,e[117]=c,e[118]=M):M=e[118];let V;e[119]!==q||e[120]!==M?(V=t.jsxs("div",{children:[Me,q,M]}),e[119]=q,e[120]=M,e[121]=V):V=e[121];let B;e[122]!==E||e[123]!==k||e[124]!==H||e[125]!==$||e[126]!==V?(B=t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[E,k,H,$,V]}),e[122]=E,e[123]=k,e[124]=H,e[125]=$,e[126]=V,e[127]=B):B=e[127];let z;e[128]!==a?(z=t.jsx(ie,{type:"button",variant:"outline",onClick:()=>{a.reset(),fe(!1)},children:"Cancel"}),e[128]=a,e[129]=z):z=e[129];let G;e[130]!==a.processing?(G=t.jsx(ie,{type:"submit",disabled:a.processing,children:"Update User"}),e[130]=a.processing,e[131]=G):G=e[131];let J;e[132]!==z||e[133]!==G?(J=t.jsxs(ct,{children:[z,G]}),e[132]=z,e[133]=G,e[134]=J):J=e[134];let K;e[135]!==at||e[136]!==B||e[137]!==J?(K=t.jsxs(ft,{className:"sm:max-w-[425px]",children:[Pe,t.jsxs("form",{onSubmit:at,className:"space-y-4",children:[B,J]})]}),e[135]=at,e[136]=B,e[137]=J,e[138]=K):K=e[138];let Q;e[139]!==et||e[140]!==K?(Q=t.jsx(pt,{open:et,onOpenChange:fe,children:K}),e[139]=et,e[140]=K,e[141]=Q):Q=e[141];let W;e[142]!==o.total?(W=t.jsxs(Et,{children:["Users (",o.total,")"]}),e[142]=o.total,e[143]=W):W=e[143];let Ve;e[144]===Symbol.for("react.memo_cache_sentinel")?(Ve=t.jsx(Tt,{children:"Manage existing user accounts."}),e[144]=Ve):Ve=e[144];let X;e[145]!==W?(X=t.jsxs(kt,{children:[W,Ve]}),e[145]=W,e[146]=X):X=e[146];let Be;e[147]===Symbol.for("react.memo_cache_sentinel")?(Be=t.jsx(It,{children:t.jsxs(xt,{children:[t.jsx(ne,{children:"Name"}),t.jsx(ne,{children:"Email"}),t.jsx(ne,{children:"Role"}),t.jsx(ne,{children:"Locations"}),t.jsx(ne,{children:"Created"}),t.jsx(ne,{children:"Actions"})]})}),e[147]=Be):Be=e[147];let Y;if(e[148]!==ce||e[149]!==me||e[150]!==o.data){let s;e[152]!==ce||e[153]!==me?(s=i=>t.jsxs(xt,{children:[t.jsx(oe,{children:i.name}),t.jsx(oe,{children:i.email}),t.jsx(oe,{children:i.roles.length>0?i.roles[0].name:"No Role"}),t.jsx(oe,{children:t.jsx("div",{className:"flex flex-wrap gap-1",children:i.locations.length>0?i.locations.map(Vt):t.jsx("span",{className:"text-gray-500 text-sm",children:"No locations"})})}),t.jsx(oe,{children:new Date(i.created_at).toLocaleDateString()}),t.jsx(oe,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ie,{size:"sm",variant:"outline",onClick:()=>me(i),children:"Edit"}),i.id!==ce.user.id&&t.jsx(ie,{size:"sm",variant:"destructive",onClick:()=>jt(i),children:"Delete"})]})})]},i.id),e[152]=ce,e[153]=me,e[154]=s):s=e[154],Y=o.data.map(s),e[148]=ce,e[149]=me,e[150]=o.data,e[151]=Y}else Y=e[151];let Z;e[155]!==Y?(Z=t.jsxs(Rt,{children:[Be,t.jsx($t,{children:Y})]}),e[155]=Y,e[156]=Z):Z=e[156];let ee;e[157]!==o.current_page||e[158]!==o.last_page?(ee=o.last_page>1&&t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("div",{className:"flex gap-2",children:Array.from({length:o.last_page},Mt).map(s=>t.jsx(vt,{href:`/settings/users?page=${s}`,className:`px-3 py-2 rounded ${s===o.current_page?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:s},s))})}),e[157]=o.current_page,e[158]=o.last_page,e[159]=ee):ee=e[159];let te;e[160]!==Z||e[161]!==ee?(te=t.jsxs(Ot,{children:[Z,ee]}),e[160]=Z,e[161]=ee,e[162]=te):te=e[162];let se;e[163]!==X||e[164]!==te?(se=t.jsxs(Ht,{children:[X,te]}),e[163]=X,e[164]=te,e[165]=se):se=e[165];let ae;e[166]!==U||e[167]!==Q||e[168]!==se?(ae=t.jsxs("div",{className:"space-y-6",children:[U,Q,se]}),e[166]=U,e[167]=Q,e[168]=se,e[169]=ae):ae=e[169];let ze;e[170]===Symbol.for("react.memo_cache_sentinel")?(ze=()=>{pe(!1),xe(null)},e[170]=ze):ze=e[170];const it=de?.name||"";let le;e[171]!==lt||e[172]!==tt||e[173]!==it?(le=t.jsx(At,{isOpen:tt,onClose:ze,onConfirm:lt,itemName:it}),e[171]=lt,e[172]=tt,e[173]=it,e[174]=le):le=e[174];let Ge;return e[175]!==ae||e[176]!==le?(Ge=t.jsxs(Ct,{breadcrumbs:qt,children:[Ce,Ne,t.jsxs(Lt,{children:[ae,le]})]}),e[175]=ae,e[176]=le,e[177]=Ge):Ge=e[177],Ge}function Mt(r,e){return e+1}function Vt(r){return t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:r.name},r.id)}function Bt(r){return t.jsx(Ye,{value:r.id.toString(),children:r.name},r.id)}function zt(r){return t.jsx(Ye,{value:r.name,children:r.name},r.id)}function Gt(r){return t.jsx(Ye,{value:r.id.toString(),children:r.name},r.id)}function Jt(r){return t.jsx(Ye,{value:r.name,children:r.name},r.id)}function Kt(r){return r.id}export{xs as default};
