import{c as we,R as D,j as l,L as xe,r as ne,H as Te}from"./app-C_R9jF1x.js";import{B as h}from"./app-logo-icon-BwBSu0IG.js";import{C as ie,a as ce}from"./card-DTVjJi2-.js";import{I as Ae}from"./input-D-5Nmu-v.js";import{c as me,S as B,a as oe,b as de,d as he}from"./select-DdUXmIzL.js";import{B as X}from"./badge-BZIuKSZg.js";import{e as Fe,c as Me,T as ye,b as o,d as Le,a as d}from"./table-Bosz4qyP.js";import{C as Z,A as ke}from"./app-layout-DKoOPHdo.js";import{S as Be}from"./square-pen-CLpDrEV2.js";import{C as ue}from"./circle-check-big-Dz9gCZqL.js";import{A as De}from"./arrow-left-BmNkB6xd.js";/* empty css            */import"./index-Bkt3dTVR.js";import"./index-BaYRpaJE.js";import"./check-vl6QDcNS.js";import"./index-lGcX66cW.js";const al=t=>{const e=we.c(80),{transactions:r,members:ee,years:le,filters:I,currentStatus:Se}=t,[m,fe]=D.useState(I.search||""),[n,je]=D.useState(I.member_id||"all"),[i,pe]=D.useState(I.year||"all"),[c,be]=D.useState(I.month||"all"),[a,ge]=D.useState(Se),ve=Ie;let P;e[0]!==n||e[1]!==c||e[2]!==m||e[3]!==a||e[4]!==i?(P=s=>{s.preventDefault(),ne.get("/transactions",{search:m,member_id:n==="all"?"":n,year:i==="all"?"":i,month:c==="all"?"":c,status:a})},e[0]=n,e[1]=c,e[2]=m,e[3]=a,e[4]=i,e[5]=P):P=e[5];const te=P;let V;e[6]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{fe(""),je("all"),pe("all"),be("all"),ge("completed"),ne.get("/transactions",{status:"completed"})},e[6]=V):V=e[6];const _e=V;let H;e[7]!==n||e[8]!==c||e[9]!==m||e[10]!==i?(H=s=>{ge(s),ne.get("/transactions",{search:m,member_id:n==="all"?"":n,year:i==="all"?"":i,month:c==="all"?"":c,status:s})},e[7]=n,e[8]=c,e[9]=m,e[10]=i,e[11]=H):H=e[11];const x=H,Ne=Pe,Ce=Ve;let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=l.jsx(Te,{title:"Transactions"}),e[12]=R):R=e[12];let $;e[13]===Symbol.for("react.memo_cache_sentinel")?($=l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(xe,{href:"/pos",children:l.jsxs(h,{variant:"outline",size:"sm",children:[l.jsx(De,{className:"h-4 w-4 mr-2"}),"Back to POS"]})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Transactions"}),l.jsx("p",{className:"text-gray-600",children:"View and manage all sales transactions"})]})]}),e[13]=$):$=e[13];let u;e[14]!==a?(u=a==="pending"?l.jsx(Z,{className:"h-3 w-3"}):l.jsx(ue,{className:"h-3 w-3"}),e[14]=a,e[15]=u):u=e[15];const se=a==="pending"?"Pay Later":"Completed";let f;e[16]!==u||e[17]!==se||e[18]!==r.data.length?(f=l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[$,l.jsxs(X,{variant:"default",className:"flex items-center gap-1",children:[u,r.data.length," ",se]})]}),e[16]=u,e[17]=se,e[18]=r.data.length,e[19]=f):f=e[19];const ae=a==="completed"?"default":"outline";let j;e[20]!==x?(j=()=>x("completed"),e[20]=x,e[21]=j):j=e[21];let J;e[22]===Symbol.for("react.memo_cache_sentinel")?(J=l.jsx(ue,{className:"h-4 w-4 mr-2"}),e[22]=J):J=e[22];let p;e[23]!==j||e[24]!==ae?(p=l.jsxs(h,{variant:ae,onClick:j,children:[J,"Completed"]}),e[23]=j,e[24]=ae,e[25]=p):p=e[25];const re=a==="pending"?"default":"outline";let b;e[26]!==x?(b=()=>x("pending"),e[26]=x,e[27]=b):b=e[27];let Y;e[28]===Symbol.for("react.memo_cache_sentinel")?(Y=l.jsx(Z,{className:"h-4 w-4 mr-2"}),e[28]=Y):Y=e[28];let g;e[29]!==re||e[30]!==b?(g=l.jsxs(h,{variant:re,onClick:b,children:[Y,"Pay Later"]}),e[29]=re,e[30]=b,e[31]=g):g=e[31];let v;e[32]!==p||e[33]!==g?(v=l.jsx(ie,{className:"mb-6",children:l.jsx(ce,{className:"p-4",children:l.jsxs("div",{className:"flex gap-2",children:[p,g]})})}),e[32]=p,e[33]=g,e[34]=v):v=e[34];let z;e[35]===Symbol.for("react.memo_cache_sentinel")?(z=s=>fe(s.target.value),e[35]=z):z=e[35];let _;e[36]!==m?(_=l.jsx(Ae,{placeholder:"Search transaction ID...",value:m,onChange:z}),e[36]=m,e[37]=_):_=e[37];let E;e[38]===Symbol.for("react.memo_cache_sentinel")?(E=l.jsx(oe,{children:l.jsx(de,{placeholder:"Member"})}),e[38]=E):E=e[38];let O;e[39]===Symbol.for("react.memo_cache_sentinel")?(O=l.jsx(B,{value:"all",children:"All Members"}),e[39]=O):O=e[39];let y;e[40]!==ee?(y=ee.map(He),e[40]=ee,e[41]=y):y=e[41];let S;e[42]!==y?(S=l.jsxs(me,{children:[O,y]}),e[42]=y,e[43]=S):S=e[43];let N;e[44]!==n||e[45]!==S?(N=l.jsxs(he,{value:n,onValueChange:je,children:[E,S]}),e[44]=n,e[45]=S,e[46]=N):N=e[46];let q;e[47]===Symbol.for("react.memo_cache_sentinel")?(q=l.jsx(oe,{children:l.jsx(de,{placeholder:"Year"})}),e[47]=q):q=e[47];let U;e[48]===Symbol.for("react.memo_cache_sentinel")?(U=l.jsx(B,{value:"all",children:"All Years"}),e[48]=U):U=e[48];let C;e[49]!==le?(C=le.map(Re),e[49]=le,e[50]=C):C=e[50];let w;e[51]!==C?(w=l.jsxs(me,{children:[U,C]}),e[51]=C,e[52]=w):w=e[52];let T;e[53]!==w||e[54]!==i?(T=l.jsxs(he,{value:i,onValueChange:pe,children:[q,w]}),e[53]=w,e[54]=i,e[55]=T):T=e[55];let G;e[56]===Symbol.for("react.memo_cache_sentinel")?(G=l.jsx(oe,{children:l.jsx(de,{placeholder:"Month"})}),e[56]=G):G=e[56];let K;e[57]===Symbol.for("react.memo_cache_sentinel")?(K=l.jsxs(me,{children:[l.jsx(B,{value:"all",children:"All Months"}),Ce().map($e)]}),e[57]=K):K=e[57];let A;e[58]!==c?(A=l.jsxs(he,{value:c,onValueChange:be,children:[G,K]}),e[58]=c,e[59]=A):A=e[59];let Q;e[60]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsxs("div",{className:"flex gap-2",children:[l.jsx(h,{type:"submit",children:"Search"}),l.jsx(h,{type:"button",variant:"outline",onClick:_e,children:"Clear"})]}),e[60]=Q):Q=e[60];let F;e[61]!==_||e[62]!==N||e[63]!==T||e[64]!==A?(F=l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[_,N,T,A,Q]}),e[61]=_,e[62]=N,e[63]=T,e[64]=A,e[65]=F):F=e[65];let M;e[66]!==te||e[67]!==F?(M=l.jsx(ie,{className:"mb-6",children:l.jsx(ce,{className:"p-4",children:l.jsx("form",{onSubmit:te,children:F})})}),e[66]=te,e[67]=F,e[68]=M):M=e[68];let L;e[69]!==a||e[70]!==r.data?(L=l.jsx(ie,{children:l.jsx(ce,{className:"p-0",children:r.data.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),l.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",a==="pending"?"Pay Later":"Completed"," transactions"]}),l.jsx(h,{variant:"outline",onClick:_e,children:"Clear Filters"})]}):l.jsxs(Fe,{children:[l.jsx(Me,{children:l.jsxs(ye,{children:[l.jsx(o,{children:"Transaction ID"}),l.jsx(o,{children:"Member"}),l.jsx(o,{children:"Status"}),l.jsx(o,{children:"Items"}),l.jsx(o,{children:"Subtotal"}),a==="pending"&&l.jsx(o,{children:"Paid"}),a==="pending"&&l.jsx(o,{children:"Balance"}),l.jsx(o,{children:"Date"}),l.jsx(o,{children:"Actions"})]})}),l.jsx(Le,{children:r.data.map(s=>l.jsxs(ye,{children:[l.jsx(d,{className:"font-medium",children:s.transaction_id}),l.jsx(d,{children:l.jsxs("div",{children:[l.jsx("div",{children:s.member_name}),s.notes&&l.jsx("div",{className:"text-xs text-gray-500",children:s.notes})]})}),l.jsx(d,{children:Ne(s.status)}),l.jsx(d,{children:s.items_count}),l.jsx(d,{className:"font-medium",children:s.formatted_subtotal}),a==="pending"&&l.jsx(d,{className:"font-medium text-blue-600",children:ve(s.total_paid)}),a==="pending"&&l.jsx(d,{className:"font-medium text-orange-600",children:ve(s.remaining_balance||0)}),l.jsx(d,{children:a==="completed"&&s.completed_at?new Date(s.completed_at).toLocaleDateString():new Date(s.created_at).toLocaleDateString()}),l.jsx(d,{children:s.status==="pending"&&l.jsx(xe,{href:`/pending-sales/${s.id}/edit`,children:l.jsxs(h,{variant:"outline",size:"sm",children:[l.jsx(Be,{className:"h-4 w-4 mr-1"}),"Update"]})})})]},s.id))})]})})}),e[69]=a,e[70]=r.data,e[71]=L):L=e[71];let k;e[72]!==r.links?(k=r.links.length>3&&l.jsx("div",{className:"flex justify-center mt-6",children:l.jsx("div",{className:"flex gap-1",children:r.links.map(Je)})}),e[72]=r.links,e[73]=k):k=e[73];let W;return e[74]!==v||e[75]!==M||e[76]!==L||e[77]!==k||e[78]!==f?(W=l.jsxs(ke,{children:[R,l.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f,v,M,L,k]})]}),e[74]=v,e[75]=M,e[76]=L,e[77]=k,e[78]=f,e[79]=W):W=e[79],W};function Ie(t){return`${(typeof t=="string"?parseFloat(t):t).toFixed(2)} VT`}function Pe(t){return t==="pending"?l.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[l.jsx(Z,{className:"h-3 w-3"}),"Pending"]}):t==="completed"?l.jsxs(X,{variant:"default",className:"flex items-center gap-1",children:[l.jsx(ue,{className:"h-3 w-3"}),"Completed"]}):l.jsx(X,{variant:"outline",children:t})}function Ve(){return[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}]}function He(t){return l.jsx(B,{value:t.id.toString(),children:t.name},t.id)}function Re(t){return l.jsx(B,{value:t.toString(),children:t},t)}function $e(t){return l.jsx(B,{value:t.value,children:t.label},t.value)}function Je(t,e){return l.jsx(xe,{href:t.url||"#",className:`px-3 py-2 rounded-md text-sm ${t.active?"bg-blue-500 text-white":t.url?"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},e)}export{al as default};
