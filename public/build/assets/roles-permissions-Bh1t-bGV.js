import{c as Se,r as Z,a as me,j as s,H as Ce,b as _e}from"./app-BjhN-tvY.js";import{c as re,B as O}from"./app-logo-icon-BPZD09yO.js";import{C as ke,a as De,b as we,d as Re}from"./card-MHcbHjeX.js";import{C as de}from"./checkbox-DRk_ldMp.js";import{c as he,f as Pe,b as pe,D as xe,a as fe,d as ge,e as je}from"./dialog-C112iB9A.js";import{I as ue}from"./input-D5PRjSUJ.js";import{L as w}from"./label-DZCSJwZ8.js";import{S as ye}from"./separator-IHZ3mKDY.js";import{B as Ne}from"./badge-DJ0Sal9S.js";import{H as Oe}from"./heading-D3ZezZ6y.js";import{A as $e}from"./app-layout-Du68zx09.js";import{S as Me}from"./layout-VdZY0qJD.js";import{P as Fe}from"./plus-d-Lyawvx.js";/* empty css            */import"./index-SvVCGikQ.js";import"./index-DMmff4St.js";import"./check--qi0KQcJ.js";import"./index-DNSXI0Kn.js";import"./index-BGKuC1gv.js";const He=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ee=re("Shield",He);const Ae=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Te=re("SquarePen",Ae);const Le=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ze=re("Trash2",Le),Be=[{title:"Settings",href:"/settings/profile"},{title:"Roles & Permissions",href:"/settings/roles-permissions"}];function ds(r){const e=Se.c(81),{roles:ee,permissions:c}=r,[o,ce]=Z.useState(!1),[se,te]=Z.useState(!1),[$,oe]=Z.useState(null);let M;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=[],e[0]=M):M=e[0];const[,be]=Z.useState(M);let F;e[1]===Symbol.for("react.memo_cache_sentinel")?(F=[],e[1]=F):F=e[1];let H;e[2]===Symbol.for("react.memo_cache_sentinel")?(H={name:"",permissions:F},e[2]=H):H=e[2];const a=me(H);let E;e[3]===Symbol.for("react.memo_cache_sentinel")?(E=[],e[3]=E):E=e[3];let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A={name:"",permissions:E},e[4]=A):A=e[4];const t=me(A);let T;e[5]!==a?(T=()=>{a.post("/settings/roles-permissions",{onSuccess:()=>{ce(!1),a.reset()}})},e[5]=a,e[6]=T):T=e[6];const ae=T;let L;e[7]!==t?(L=i=>{oe(i),t.setData({name:i.name,permissions:i.permissions.map(qe)}),be(i.permissions.map(Ve)),te(!0)},e[7]=t,e[8]=L):L=e[8];const R=L;let z;e[9]!==t||e[10]!==$?(z=()=>{$&&t.put(`/settings/roles-permissions/${$.id}`,{onSuccess:()=>{te(!1),oe(null),t.reset()}})},e[9]=t,e[10]=$,e[11]=z):z=e[11];const ie=z,ve=Ue;let B;e[12]!==o||e[13]!==a||e[14]!==t?(B=(i,l)=>{const D=o?a.data.permissions:t.data.permissions;if(l){const n=[...D,i];o?a.setData("permissions",n):t.setData("permissions",n)}else{const n=D.filter(P=>P!==i);o?a.setData("permissions",n):t.setData("permissions",n)}},e[12]=o,e[13]=a,e[14]=t,e[15]=B):B=e[15];const m=B;let I,U;e[16]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(Ce,{title:"Roles & Permissions"}),U=s.jsx("h1",{className:"sr-only",children:"Roles & Permissions"}),e[16]=I,e[17]=U):(I=e[16],U=e[17]);let V;e[18]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(Oe,{title:"Roles & Permissions",description:"Manage user roles and their permissions"}),e[18]=V):V=e[18];let q;e[19]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(Pe,{asChild:!0,children:s.jsxs(O,{children:[s.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Create Role"]})}),e[19]=q):q=e[19];let G;e[20]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsxs(pe,{children:[s.jsx(xe,{children:"Create New Role"}),s.jsx(fe,{children:"Define a new role and assign permissions to it."})]}),e[20]=G):G=e[20];let J;e[21]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(w,{htmlFor:"name",className:"text-right",children:"Role Name"}),e[21]=J):J=e[21];let d;e[22]!==a?(d=i=>a.setData("name",i.target.value),e[22]=a,e[23]=d):d=e[23];let h;e[24]!==a.data.name||e[25]!==d?(h=s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[J,s.jsx(ue,{id:"name",value:a.data.name,onChange:d,className:"col-span-3",placeholder:"e.g., Manager, Auditor"})]}),e[24]=a.data.name,e[25]=d,e[26]=h):h=e[26];let K;e[27]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(w,{className:"text-right pt-2",children:"Permissions"}),e[27]=K):K=e[27];let p;e[28]!==a.data.permissions||e[29]!==c||e[30]!==m?(p=s.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[K,s.jsx("div",{className:"col-span-3 h-64 border rounded-md p-4 overflow-y-auto",children:s.jsx("div",{className:"space-y-4",children:Object.entries(c).map(i=>{const[l,D]=i;return s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide mb-2",children:l.replace("_"," ")}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.map(n=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{id:`create-${n.name}`,checked:a.data.permissions.includes(n.name),onCheckedChange:P=>m(n.name,P)}),s.jsx(w,{htmlFor:`create-${n.name}`,className:"text-sm font-normal",children:n.name.replace("_"," ")})]},n.id))}),l!==Object.keys(c)[Object.keys(c).length-1]&&s.jsx(ye,{className:"mt-4"})]},l)})})})]}),e[28]=a.data.permissions,e[29]=c,e[30]=m,e[31]=p):p=e[31];let x;e[32]!==h||e[33]!==p?(x=s.jsxs("div",{className:"grid gap-4 py-4",children:[h,p]}),e[32]=h,e[33]=p,e[34]=x):x=e[34];const le=a.processing?"Creating...":"Create Role";let f;e[35]!==a.processing||e[36]!==ae||e[37]!==le?(f=s.jsx(he,{children:s.jsx(O,{type:"submit",onClick:ae,disabled:a.processing,children:le})}),e[35]=a.processing,e[36]=ae,e[37]=le,e[38]=f):f=e[38];let g;e[39]!==x||e[40]!==f?(g=s.jsxs(ge,{className:"max-w-2xl max-h-[80vh]",children:[G,x,f]}),e[39]=x,e[40]=f,e[41]=g):g=e[41];let j;e[42]!==o||e[43]!==g?(j=s.jsxs("div",{className:"flex items-center justify-between",children:[V,s.jsxs(je,{open:o,onOpenChange:ce,children:[q,g]})]}),e[42]=o,e[43]=g,e[44]=j):j=e[44];let u;if(e[45]!==R||e[46]!==ee){let i;e[48]!==R?(i=l=>s.jsxs(ke,{children:[s.jsxs(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsxs(we,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Ee,{className:"h-4 w-4"}),l.name]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(O,{variant:"ghost",size:"sm",onClick:()=>R(l),disabled:l.name==="Super Admin",children:s.jsx(Te,{className:"h-4 w-4"})}),s.jsx(O,{variant:"ghost",size:"sm",onClick:()=>ve(l),disabled:l.name==="Super Admin",className:"text-destructive hover:text-destructive",children:s.jsx(ze,{className:"h-4 w-4"})})]})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:l.permissions.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"permissions assigned"}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[l.permissions.slice(0,3).map(Ie),l.permissions.length>3&&s.jsxs(Ne,{variant:"outline",className:"text-xs",children:["+",l.permissions.length-3," more"]})]})]})]},l.id),e[48]=R,e[49]=i):i=e[49],u=ee.map(i),e[45]=R,e[46]=ee,e[47]=u}else u=e[47];let y;e[50]!==u?(y=s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u}),e[50]=u,e[51]=y):y=e[51];let Q;e[52]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsxs(pe,{children:[s.jsx(xe,{children:"Edit Role"}),s.jsx(fe,{children:"Modify the role name and permissions."})]}),e[52]=Q):Q=e[52];let W;e[53]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(w,{htmlFor:"edit-name",className:"text-right",children:"Role Name"}),e[53]=W):W=e[53];let N;e[54]!==t?(N=i=>t.setData("name",i.target.value),e[54]=t,e[55]=N):N=e[55];let b;e[56]!==t.data.name||e[57]!==N?(b=s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[W,s.jsx(ue,{id:"edit-name",value:t.data.name,onChange:N,className:"col-span-3"})]}),e[56]=t.data.name,e[57]=N,e[58]=b):b=e[58];let X;e[59]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(w,{className:"text-right pt-2",children:"Permissions"}),e[59]=X):X=e[59];let v;e[60]!==t.data.permissions||e[61]!==c||e[62]!==m?(v=s.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[X,s.jsx("div",{className:"col-span-3 h-64 border rounded-md p-4 overflow-y-auto",children:s.jsx("div",{className:"space-y-4",children:Object.entries(c).map(i=>{const[l,D]=i;return s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide mb-2",children:l.replace("_"," ")}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.map(n=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{id:`edit-${n.name}`,checked:t.data.permissions.includes(n.name),onCheckedChange:P=>m(n.name,P)}),s.jsx(w,{htmlFor:`edit-${n.name}`,className:"text-sm font-normal",children:n.name.replace("_"," ")})]},n.id))}),l!==Object.keys(c)[Object.keys(c).length-1]&&s.jsx(ye,{className:"mt-4"})]},l)})})})]}),e[60]=t.data.permissions,e[61]=c,e[62]=m,e[63]=v):v=e[63];let S;e[64]!==b||e[65]!==v?(S=s.jsxs("div",{className:"grid gap-4 py-4",children:[b,v]}),e[64]=b,e[65]=v,e[66]=S):S=e[66];const ne=t.processing?"Updating...":"Update Role";let C;e[67]!==t.processing||e[68]!==ie||e[69]!==ne?(C=s.jsx(he,{children:s.jsx(O,{type:"submit",onClick:ie,disabled:t.processing,children:ne})}),e[67]=t.processing,e[68]=ie,e[69]=ne,e[70]=C):C=e[70];let _;e[71]!==S||e[72]!==C?(_=s.jsxs(ge,{className:"max-w-2xl max-h-[80vh]",children:[Q,S,C]}),e[71]=S,e[72]=C,e[73]=_):_=e[73];let k;e[74]!==se||e[75]!==_?(k=s.jsx(je,{open:se,onOpenChange:te,children:_}),e[74]=se,e[75]=_,e[76]=k):k=e[76];let Y;return e[77]!==j||e[78]!==y||e[79]!==k?(Y=s.jsxs($e,{breadcrumbs:Be,children:[I,U,s.jsx(Me,{children:s.jsxs("div",{className:"space-y-6",children:[j,y,k]})})]}),e[77]=j,e[78]=y,e[79]=k,e[80]=Y):Y=e[80],Y}function Ie(r){return s.jsx(Ne,{variant:"secondary",className:"text-xs",children:r.name.split(" ")[0]},r.id)}function Ue(r){confirm(`Are you sure you want to delete the "${r.name}" role? This action cannot be undone.`)&&_e.delete(`/settings/roles-permissions/${r.id}`)}function Ve(r){return r.name}function qe(r){return r.name}export{ds as default};
